---
import StarlightMarkdownContent from '@astrojs/starlight/components/MarkdownContent.astro'

import { getBlogEntry } from '../libs/content'
import { isAnyBlogPostPage } from '../libs/route'

import Metadata from './Metadata.astro'

const isBlogPost = isAnyBlogPostPage(Astro)
const post = isBlogPost ? await getBlogEntry(Astro.url.pathname) : undefined
---

<StarlightMarkdownContent {...Astro.props}>
  {isBlogPost && post ? <Metadata entry={post} /> : null}
  <slot />
</StarlightMarkdownContent>

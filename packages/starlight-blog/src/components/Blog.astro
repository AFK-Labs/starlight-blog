---
import type { InferGetStaticPropsType } from 'astro'
import config from 'virtual:starlight-blog-config'

import { getBlogStaticPaths } from '../libs/content'

import Page from './_Page.astro'
import Preview from './Preview.astro'
import PrevNextLinks from './PrevNextLinks.astro'

export function getStaticPaths() {
  return getBlogStaticPaths()
}

type Props = InferGetStaticPropsType<typeof getStaticPaths>

// TODO(HiDeoo) review all this
const entry = {
  data: {
    head: [],
    tableOfContents: false,
    title: config.title,
  },
}

const { entries, nextLink, prevLink } = Astro.props

// TODO(HiDeoo) review props below
---

<Page lang="en" entry={entry} entryMeta={{ lang: 'en' }}>
  <div class="posts flex">{entries.map((entry) => <Preview {entry} />)}</div>
  <footer class="not-content">
    <PrevNextLinks next={nextLink} prev={prevLink} />
  </footer>
</Page>

<style>
  :global(.content-panel:first-of-type) {
    display: none;
  }

  .posts {
    flex-direction: column;
    gap: 3rem;
  }
</style>
